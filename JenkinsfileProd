@Library('shared-jenkins-library@master') _

pipeline {
    agent { label "master" }
    tools { nodejs 'NodeJS' }

    parameters {
      string(name: 'APP_VERSION', defaultValue: '1.x.x-x', description: 'Release Version')
    }

    stages {
        stage ('Deploy') {
            steps {
                script {
                    webDeployProd(
                       params.AMPLIFY_APP_ID,
                       params.APP_VERSION,
                       params.ENVIRONMENT 
                    )
                }
            }
        }
    }

    post {
        always {
            script {
                sendNotifications(currentBuild.result)
            }
        }
    }
}
